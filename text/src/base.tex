\documentclass[a4paper, 14pt, titlepage]{extarticle}
  \usepackage{cmap}
  \usepackage[hidelinks,pdftex,unicode]{hyperref}
  \usepackage{mathtext} % для кириллицы в формулах
  \usepackage[T2A]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage[english,russian]{babel}
  \usepackage{indentfirst}
  \usepackage{cite}
  \usepackage{amsmath} % для \eqref
  \usepackage{amssymb} % для \leqslant
  \usepackage{amsthm} % для \pushQED
  \usepackage[usenames,dvipsnames]{xcolor}
  \usepackage[pdftex]{graphicx}
  \usepackage{subfig}
  \usepackage{numprint}
  \usepackage[left=30mm,right=15mm,top=20mm,bottom=20mm,bindingoffset=0cm]{geometry}
  \usepackage{datetime}
  \usepackage{setspace} % для иных отступов в tikz-картинках
  \usepackage{tikz}
    \usetikzlibrary{positioning,fit,shapes,calc,backgrounds}
  \usepackage[babel,protrusion=true,expansion]{microtype}
  \usepackage{nameref}
  \graphicspath{{../img/}{../../img/}}
  \frenchspacing

  \DeclareSymbolFont{T2Aletters}{T2A}{cmr}{m}{it} % кириллица в формулах курсивом

  \addto\captionsrussian{
    \renewcommand\contentsname{Содержание}
    % перекрываю \refname, чтобы список литературы сам добавлял себя в оглавление
    \let\oldrefname\refname
    \renewcommand\refname{\addcontentsline{toc}{section}{\oldrefname}\oldrefname}
  }

  % Ненумерованный section, но добавленный в оглавление
  \newcommand\sectiontoc[1]{\section*{#1}\addcontentsline{toc}{section}{#1}}

  \newcommand{\underscore}[1]{\hbox to#1{\hrulefill}}
  \newcommand{\todo}[1]{\textbf{\textcolor{red}{TODO: #1}}}
  \newcommand{\note}[1]{\textit{Примечание: #1}}
  \newcommand{\eng}[1]{\foreignlanguage{english}{#1}}

  % выделение термина в определении (и не только)
  \newcommand{\term}[1]{\emph{#1}}

  % обёртка с моими настройками поверх figure:
  % \begin{myfigure}{подпись}{fig:label} ... \end{myfigure}
  \newenvironment{myfigure}[2]%
    % FIXME тире вместо двоеточия в подписи рисунка
    {\pushQED{\caption{#1} \label{#2}} % push caption & label
     \begin{figure}[!htb]\centering } %
    {  \popQED % pop caption & label
     \end{figure}}

  % вставка картинки: \figure[params]{подпись}{file}
  % создаёт label вида fig:file
  \newcommand{\includefigure}[3][]{
    \begin{myfigure}{#2}{fig:#3}
      \includegraphics[#1]{#3}
    \end{myfigure}
  }

  % вставка subfigure внутри myfigure:
  % \subfigure[params]{подпись}{file}
  \newcommand{\subfigure}[3][]{
    \subfloat[#2]{\label{fig:#3}\includegraphics[#1]{#3}}
  }

  \renewcommand{\le}{\leqslant} % <= с наклонной нижней перекладиной
  \renewcommand{\ge}{\geqslant} % >= с наклонной нижней перекладиной

  \linespread{1.3}

  % русские буквы для списков и частей рисунка
  \renewcommand{\theenumii}{(\asbuk{enumii})}
  \renewcommand{\labelenumii}{\asbuk{enumii})}
  \renewcommand{\thesubfigure}{\asbuk{subfigure}}

  % разделы с новой страницы
  \let\oldsection\section
  \renewcommand{\section}{\newpage\oldsection}

  % \paragraph с обычным отступом первой строки
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}[1]{\oldparagraph{\indent #1}}

  \setcounter{tocdepth}{3} % глубина оглавления

  \hyphenation{англ} % убрать перенос в этом сокращении

  % алиас и настройки для numprint
  \newcommand{\num}[1]{\numprint{#1}}
  \npthousandsep{\,}
  \npthousandthpartsep{}
  \npdecimalsign{,}

  \newcommand{\checkdate}[3]{(дата обращения: \formatdate{#1}{#2}{#3})}

  \newcommand{\thetitle}{Создание универсальной информационной системы обработки экспериментальных данных}
  \newcommand{\theauthor}{Иван Новиков}

  \author{\theauthor, кафедра физики и информационных систем КубГУ}
  \title{\thetitle}

  \hypersetup{
    pdfinfo={
      Title = {\thetitle},
      Author = {\theauthor},
      Subject = {}
    }
  }

\begin{document}

%----------------------- титульный лист ------------------------

  \thispagestyle{empty}
  \begin {center}
  \small{МИНИСТЕРСТВО ОБРАЗОВАНИЯ И НАУКИ РОССИЙСКОЙ ФЕДЕРАЦИИ}\\
  Федеральное государственное бюджетное образовательное учреждение\\
  высшего профессионального образования\\
  «КУБАНСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ»\\
  (ФГБОУ ВПО «КубГУ»)

  Физико-технический факультет

  \vspace {1cm}

  Кафедра физики и информационных систем

  \vspace {1cm}

  \hfill
  \begin{minipage}{7cm}
    \begin{flushleft}
      Допустить к защите в ГАК\\
      \hspace*{0mm}\hrulefill{} 2014г.\\
      Заведующий кафедрой\\
      профессор, д-р физ.-мат. наук\\
      Н.\,М.\,Богатов \hrulefill{}\\
      ~\hrule
      \footnotesize{\centering (подпись, дата)\par}
    \end{flushleft}
  \end{minipage}

  \vspace {1.5cm}

  \textbf{МАГИСТЕРСКАЯ ДИССЕРТАЦИЯ}

  \vspace {0.5cm}

  \textbf{ \large \scshape \thetitle }

  \vspace {1.5cm}

  \begin{flushleft}
    Работу выполнил \hrulefill{}  (Новиков Иван Александрович)\\
    Направление магистерской подготовки 011200.68 Физика

    Руководитель магистерской программы <<Информационные процессы и системы>>\\
    профессор, д-р физ.-мат. наук \hrulefill{} (В.\,А.\,Исаев)

    Научный руководитель\\
    доцент, канд. физ.-мат. наук \hrulefill{} (Л.\,Р.\,Григорьян)

    Нормоконтролер\\
    доцент, канд. физ.-мат. наук \hrulefill{} (Л.\,Р.\,Григорьян)
  \end{flushleft}

  \vfill

  Краснодар 2014
  \end {center}

%------------------------- содержание -------------------------

  \microtypesetup{protrusion=false} % отключить protrusion для содержания
    \clearpage
    \tableofcontents
  \microtypesetup{protrusion=true}

%-------------------------- введение --------------------------
  \sectiontoc{Введение}\label{sec:intro}

  В процессе производственной и познавательной деятельности возникает множество практических и
  теоретических задач, для решения которых необходимо располагать количественной информацией о том
  или ином свойстве объекта. Основным способом получения такой информации является процесс измерения.
  Измерения лежат в основе экспериментальной науки, как фундаментальной, так и прикладной. При этом
  в последнее время, в~связи с широким распространением цифровых технологий, точные измерения можно
  встретить не только в научной лаборатории, но и на производстве и в быту.
  Поэтому задача повышения эффективности и достоверности процессов измерения и обработки информации
  является актуальной.

  Усложнение технологий, применяемых на производстве, и развитие научных методов создаёт
  необходимость измерения и контроля многих параметров, вплоть до сотен и тысяч, а также
  выполнения большого числа измерений в единицу времени. Это привело к появлению нового класса
  измерительной техники~--- \term{измерительных информационных систем} \cite{rannev-iis,rannev-meas-tech},
  выполняющих задачи сбора, обработки, передачи, хранения и отображения информации.

  По мере усложнения задач, выполняемых системами измерения, возрастает как сложность самих систем,
  так и требования к их скорости, надёжности и функциональности. Возникает необходимость в
  автоматизации эксперимента, уменьшении человеческого фактора (ошибок, медленной реакции и~т.\,п.).
  \term{Автоматизация эксперимента}~--- комплекс
  средств и методов для ускорения сбора и обработки экспериментальный данных, интенсификации
  использования экспериментальных установок, повышения эффективности работы исследователей.
  Характерной особенностью автоматизации эксперимента является использование ЭВМ, что позволяет
  собирать, хранить и обрабатывать большое количество информации, управлять экспериментом в процессе
  его проведения, обслуживать одновременно несколько установок \cite{petronevich-automation,sokolov-auto-measure}.

  В настоящее время в измерительных информационных системах используются практически все типы
  серийно выпускаемых ЭВМ~--- от простейших настольных, переносных или встроенных персональных
  компьютеров до мощных рабочих станций и крупных вычислительных комплексов \cite[с.~149]{rannev-iis}.
  Чтобы применение ЭВМ действительно способствовало повышению эффективности измерений, к ЭВМ
  предъявляется важное требование: она должна работать в режиме \term{реального времени}
  \cite{tessier-reconfigurable}. В частности, недопустимы задержки отклика, которые могут приводить
  к потерям получаемых данных и некорректной привязке приходящих данных ко времени. С~другой
  стороны, увеличение точности по времени связано с увеличением частоты дискретизации, и, как
  следствие, количества обрабатываемых в единицу времени отсчётов данных. Это вынуждает либо искать
  компромисс между реальным временем и высокой пропускной способностью, либо повышать быстродействие
  ЭВМ, что включает в себя как использование более производительного аппаратного обеспечения, так и
  оптимизацию программного обеспечения.

  Помимо получения измерительных данных, ЭВМ также, в зависимости от решаемой задачи, может
  выполнять их преобразование, анализ, сохранение и визуальное представление, а также дальнейшую
  передачу по каналу связи. Из того, что эти процессы должны протекать одновременно и независимо,
  вытекает ещё одна особенность программного обеспечения для обработки измерительных данных~---
  необходимость использования \term{параллельных вычислений}. Это требование, как и требование
  быстродействия, влияет и на выбор аппаратного обеспечения, и на реализацию программного обеспечения.
  При этом важно понимать, что простое увеличение количества процессоров и использование
  многопоточности само по себе не гарантирует существенного ускорения работы программы. Возможность
  параллельного выполнения должна быть заложена в сам алгоритм, кроме того, требует осторожности
  работа с общими данными из нескольких потоков, чтобы избегать блокировок \cite{hoare-csp}.

  Системы автоматизированной обработки измерительных данных находят применение в различных отраслях науки,
  в том числе, в геофизике (регистрация землетрясений и поиск полезных ископаемых), радиофизике,
  ядерной физике, физике полупроводников и многих других. Кроме экспериментальной науки ИИС
  применяются для управления и контроля за технологическими процессами, в специализированной
  измерительной технике.

  Целью данной работы является разработка универсальной информационной системы обработки
  % FIXME не использовать "то есть" в формулировке цели
  измерительных данных, то~есть специализированного программного обеспечения, предназначенного для
  выполнения на ЭВМ, являющейся частью некоторой ИИС, с целью эффективной автоматизации процесса
  обработки экспериментальных данных. Для достижения этой цели ставятся задачи, которые подробно
  описаны далее, в подразделе~\ref{ssec:task}.

  % FIXME после цели~--- задачи, потом объект (???)
  Объектом данного исследования являются экспериментальные данные и сигналы, используемые для их
  кодирования и передачи; а предметом исследования~--- способы повышения эффективности регистрации
  таких сигналов и обработки экспериментальных данных, в частности, измерительные информационные
  системы и применяемое в них программное обеспечение, а также алгоритмы обработки цифровых сигналов.

  \section{Измерительные информационные системы}\label{sec:iis}

  Конец XX~-- начало XXI в. характеризуются количественным и качественным развитием измерительных
  информационных систем во всем мире \cite[с.~3]{rannev-iis}. В наш век информационных
  технологий становится все более актуальным применение таких систем, так как они упрощают и облегчают доступ
  к необходимой информации, обеспечивают регулирование сложными технологическими процессами.
  Данный раздел содержит обзор предметной области информационных измерительных систем, включая цели
  и задачи их применения и требования, предъявляемые к ним.

  \term{Измерительная информационная система (ИИС)}~--- это совокупность функционально объединённых
  измерительных, вычислительных и других вспомогательных технических средств для получения
  измерительной информации, её преобразования, обработки с целью представления потребителю в
  требуемом виде, либо автоматического осуществления логических функций контроля, диагностики,
  распознавания и других функций \cite[с.~9]{volkov-iis}.
  Необходимые функциональные возможности и технические характеристики ИИС определяются
  \term{объектом исследования}, для которого данная система создаётся.

  Ниже приведены определения основных связанных понятий и рассмотрены особенности применения
  измерительных информационных систем.

  \subsection{Предметная область ИИС}

  % FIXME не нужно ссылки на Введение (просто "выше")
  Как уже было сказано выше в~разделе \nameref{sec:intro}, измерения в настоящее время применяются
  во многих отраслях науки, производства и быта. Современные задачи, возникающие в этих областях,
  и условия проведения научных экспериментов, а также проверок и испытаний образцов промышленной
  продукции связаны с необходимостью выполнения
  больших объёмов измерений разнообразных физических величин и технологических параметров.
  В~промышленности количество таких параметров может измеряться сотнями и тысячами.

  Для получения новых существенных результатов исследований, испытания сложных изделий, машин и
  оборудования к измерительной аппаратуре предъявляются все более жёсткие требования
  точности, достоверности результатов измерения, быстродействия. Это приводит к усложнению
  процесса обработки результатов измерений, которая при этом должна проводиться в реальном масштабе
  времени. Также необходима возможность адаптации процесса измерения к изменяющимся данным и условиям
  измерения прямо в процессе работы. Как следствие, увеличивается трудоёмкость и стоимость
  проведения измерительных процедур и эксперимента в целом. Для преодоления этих трудностей
  необходима разработка специальных измерительных информационных систем, построение которых
  невозможно без широкого использования современной вычислительной техники, в первую очередь,
  микропроцессорных технологий (микроконтроллеров, персональных компьютеров), а также развитых
  средств связи с объектами исследования и управления.

  Научно"=технический эксперимент, в отличие от производственно"=технологических процессов, имеет ряд
  особенностей, учёт которых необходим при проектировании ИИС, применяемых в этой области \cite[с.~17]{rannev-iis}.
  Часть из них перечислена ниже.
  \begin{enumerate}
    \item Большое разнообразие проводимых научно-технических экспериментов в сочетании с массовым
      характером их применения.
    \item Для исследований характерно изменение и усложнения методики эксперимента со временем,
      что может потребовать быстрой перестройки конфигурации системы, добавления новых функций.
    \item В одном эксперименте может одновременно использоваться большое число датчиков и
      исполнительных органов.
    \item Получаемые выборки данных имеют значительный объём.
    \item Исследуются сигналы в широком частотном спектр~--- от единиц герц до десятков и сотен
      мегагерц и выше.
  \end{enumerate}
  Для научных экспериментов также характерна широкая кооперация для проведения крупномасштабных
  исследований. Для обеспечения возможности объединения усилий разных исследователей существенно
  важна совместимость различных компонентов ИИС. Этому, в частности, способствует и использование
  программного обеспечения с открытым исходным кодом.

  Ниже приведены лишь некоторые основные понятия этой широкой предметной области.

  \term{Измерение}~--- нахождение значения физической величины опытным путём с помощью специальных
  технических средств. Измерение предполагает применение технического средства, хранящего единицу
  физической величины, для её сравнения с исследуемой физической величиной, и представление
  результата этого сравнения в виде числа.
  \term{Физическая величина}~--- одно из свойств физического объекта (физической системы, явления
  или процесса), общее в качественном отношении для многих физических объектов, а в количественном
  отношении индивидуальное для каждого из них \cite[с.~7]{rannev-iis}.

  \term{Метод измерения}~--- это совокупность некоторых принципов и средств измерений для
  определения значения величин. Под \term{принципом измерения} понимают совокупность физических явлений, на
  которых основаны измерения, а под \term{средствами измерений}~--- технические средства, используемые при
  измерениях и имеющие нормированные метрологические свойства. Измерение является
  многооперационной процедурой, и для его выполнения необходимо осуществление основных измерительных
  операций: воспроизведения, сравнения, измерительного преобразования и масштабирования.
  \term{Воспроизведение величины} заданного размера~--- это операция создания выходного сигнала с
  заданным размером информативного параметра. Она реализуется средством измерений~--- \term{мерой}.
  \term{Сравнение}~--- это определение соотношения между однородными величинами, осуществляемое
  путём их вычитания. Данная операция реализуется устройством сравнения (компаратором).
  \term{Измерительное преобразование}~--- операция преобразования входного сигнала в выходной,
  реализуемая измерительным преобразователем. Выходные сигналы измерительных преобразователей и их
  информативные параметры унифицированы.
  \term{Масштабирование}~--- это создание выходного сигнала, однородного с входным и
  пропорционального ему по размеру информативного параметра. Масштабное преобразование реализуется
  в~устройстве, которое называется масштабным преобразователем \cite[с.~16]{volkov-iis}.
  В~упрощённом виде алгоритм процесса измерения представлен на рис.~\ref{fig:meas-algo}.

  % FIXME другие цвета рисунков
  \begin{myfigure}{структурная схема алгоритма измерения}{fig:meas-algo}
    \begin{tikzpicture}[scale=1.0, transform shape]
      \tikzstyle{arrow}  = [->, thick]
      \tikzstyle{onarrow} = [pos=0.5, font=\footnotesize]
      \tikzstyle{item}  = [text centered, font=\footnotesize]
      \tikzstyle{block} = [item, rectangle, draw=blue, rounded corners, fill=cyan!10, text width=3cm]
      \tikzstyle{cond}  = [item, diamond, aspect=1.5, draw=Orange, fill=orange!20, text width=2cm]

      \node[block] (meas) {Измерение};
      \node[cond]  (check) [below=of meas]  {Сравнение с мерой};
      \node[block] (res)   [below=of check] {Отображение информации};
      \node[block] (corr)  [right= of check]  {Корректировка алгоритма измерения};

      \draw[arrow] (meas)  -- (check);
      \draw[arrow] (check) -- (res)  node[onarrow,left] {Да};
      \draw[arrow] (check) -- (corr) node[onarrow,below]{Нет};
      \draw[arrow] (corr)  |- (meas);
    \end{tikzpicture}
  \end{myfigure}

  Рассмотрим также некоторые термины, связанные непосредственно с самими измерительными информационными
  системами.

  \term{Вход ИИС}~--- часть системы или входящего в неё устройства, на которую непосредственно
  подаётся воздействие извне (то есть которая получает входящую информацию).
  \term{Выход ИИС}~---часть системы или входящего в неё устройства, которая в соответствии с
  алгоритмом функционирования непосредственно воздействует вовне (то есть выдаёт обработанную информацию).
  \term{Сигнал}~--- обусловленное (заранее договорённое) состояние или изменение состояния
  представляющего параметра, отображающее информацию, которая содержится в воздействии (как правило,
  выражается некоторой математической функцией, однозначно отображающей изменения во времени
  представляющего параметра).
  \term{Канал связи}~--- совокупность линий связи и технических устройств на передающей и приёмной
  частях системы.

  \term{Техническое обеспечение ИИС}~--- комплекс технических средств, предназначенных для
  обеспечения работы измерительной информационной системы.
  \term{Информационное обеспечение ИИС}~--- совокупность системы классификации и кодирования
  технологической информации, сигналов, характеризующих состояние объекта,
  массивов данных и документов, необходимых для выполнения всех функций ИИС.
  \term{Математическое обеспечение ИИС}~--- совокупность методов, математических моделей и алгоритмов,
  необходимых для выполнения функций ИИС.
  \term{Программное обеспечение ИИС}~--- совокупность программ, обеспечивающих реализацию функций
  системы, заданное функционирование комплекса технических средств ИИС и контроль за процессом измерения.
  Схема взаимодействие этих составляющих ИИС представлена на рис.~\ref{fig:iis-components}.

  \begin{myfigure}{схема взаимодействия основных компонентов измерительных информационных систем}{fig:iis-components}
    \begin{tikzpicture}[scale=1.0, transform shape]
      \tikzstyle{arrow}  = [->, thick]
      \tikzstyle{biarrow}  = [<->, very thick]
      % block - общий стиль-предок для inblk и outblk
      \tikzstyle{block}  = [rectangle, rounded corners, text centered, font=\footnotesize,
                              text width=3cm]
      \tikzstyle{inblk}  = [block, draw=blue, fill=cyan!10, minimum height=1.4cm]
      \tikzstyle{outblk} = [block, draw=OliveGreen, fill=green!10]
      \tikzstyle{bigarrow}=[draw=Gray, fill=Gray!10, thick]
      \tikzstyle{around} = [rectangle, rounded corners, draw=darkgray, loosely dashed]

      \node[inblk] (in) {Входная\\информация};
      \node[inblk] (inf) [right=3mm of in]{Информационное\\обеспечение};
      \node[inblk] (out) [right=3mm of inf]{Выходная информация};

      \node[outblk] (tech) [below=1.7cm of inf.west] {Техническое\\обеспечение};
      \node[outblk] (soft) [right=1cm of tech] {Программное\\обеспечение};
      \node[outblk] (pers) [above=1.7cm of out.west] {Оперативный\\персонал};
      \node[outblk] (org)  [left=1cm of pers] {Организационное\\обеспечение};

      \draw[arrow] (org) -- (pers);
      \draw[arrow] (soft) -- (tech);
      \draw[biarrow] ($(inf.west)+(0,-1cm)$) -- (tech);
      \draw[biarrow] ($(out.west)+(0, 1cm)$) -- (pers);

      \begin{pgfonlayer}{background}
        \node[fit=(org)(pers)(tech)(soft),around,label={[font=\small]below:Метрологическое обеспечение}] (title) {\hspace*{\fill}~}; % hspace - хак, чтобы подавить underfull hbox

        \draw[bigarrow] ($(in.north west) + (-3mm,3mm)$) -- ($(in.south west) + (-3mm,-3mm)$) --
                        ($(out.south east) + (-3mm,-3mm)$) -- ++(0, -0.5cm) --
                        ($(out.east) + (2cm, 0)$) -- ($(out.north east) + (-3mm,0.8cm)$) --
                        ++(0cm, -0.5cm) -- cycle;
      \end{pgfonlayer}

    \end{tikzpicture}
  \end{myfigure}

  \term{Совместимость ИИС}~--- возможность взаимосвязанного функционирования измерительных систем разных уровней и
  различного функционального назначения.
  \term{Надёжность ИИС}~--- способность ИИС выполнять функции, сохраняя эксплуатационные показатели
  в установленных пределах в течение заданного интервала времени при заданных условиях эксплуатации.
  Надёжность характеризуется показателями безотказности, ремонтопригодности и долговечности
  \cite[с.~5--7]{rannev-iis}.

  % TODO классификация ИИС?
  Выделим особо некоторые разновидности измерительных информационных систем.

  \term{Измерительно-вычислительный комплекс (ИВК)}~--- одна из разновидностей ИИС, функционально
  объединённая с помощью специальной многоканальной магистрали совокупность средств
  измерений, вычислительной техники, устройств отображения информации и вспомогательных устройств,
  предназначенная для выполнения конкретной измерительной задачи. Основными признаками
  принадлежности измерительной системы к ИВК являются: наличие компьютера, программное управление
  средствами измерений, нормированные метрологические характеристики, блочно-модульная структура \cite[с.~225]{rannev-iis}.

  \term{Виртуальные приборы (англ.~\eng{virtual instruments})}~--- понятие, появившееся на стыке
  измерительной информационной и компьютерной техники. Виртуальный информационно-измерительный
  прибор или система — это компьютер, оснащённый набором аппаратных и программных средств,
  выполняющий функции информационно-измерительного прибора или системы и максимально приближенный к
  решению задачи. При этом часть функций и операций осуществляется не аппаратно, а программно с
  помощью персонального компьютера \cite[с.~209]{rannev-iis}. Примером программного обеспечения для
  реализации виртуальных приборов является пакет LabVIEW \cite{lavrov-labview}. Подробнее подобное
  ПО рассмотрено ниже, в подразделе \ref{ssec:existing}.

  \subsection{Цели и задачи применения ИИС}

  Спектр отраслей, в которых применяются измерительные информационные системы весьма широк.
  В частности, ИИС применяются для решения задач управления технологическими и
  производственными процессами (например, атомными электростанциями и ТЭЦ), для автоматизации экспериментальных
  исследований (в ядерной физике, аэродинамике и многих других областях науки), для испытаний, мониторинга,
  диагностики и тестирования аппаратных средств (отдельных агрегатов и целых машин, например, самолётов). В
  каждой из этих областей объектам и явлениям присущи некоторые отличительные особенности, которые
  предъявляют к измерительной системе свои характерные требования. Но несмотря на эти различия,
  для всех ИИС характерны общие тенденции развития, принципы построения и подходы к проектированию.
  % \cite[с.~24]{rannev-iis}

  Основная цель применения измерительных информационных систем~--- повышение эффективности и
  достоверности процесса измерения за счёт его автоматизации. В~данном случае автоматизация, с одной
  стороны, позволяет исключить негативное влияние человеческого фактора (невнимательности, ошибок)
  на процесс измерения, а с~другой~--- открывает возможности, которые в принципе недоступны без
  использования вычислительных технологий (такие как, например, обработка больших объёмов информации
  в реальном времени или способность менять алгоритмы обработки в зависимости от характера входных данных).
  % TODO это фразы от себя! Нужны источники

  Назначение любой измерительной информационной системы можно определить как целенаправленное
  оптимальное ведение измерительного процесса и обеспечение смежных систем высшего уровня
  достоверной информацией. Исходя из этого, основные функции
  измерительной информационной системы \cite[с.~397]{rannev-meas-tech}:
  \begin{itemize}
    \item получение измерительной информации от объекта исследования;
    \item обработка информации;
    \item сохранение информации;
    \item представление информации оператору;
    \item дальнейшая передача информации;
    \item формирование управляющих воздействий.
  \end{itemize}
  В графическом виде эти основные функции представлены на рис.~\ref{fig:iis-functions}.

  \begin{myfigure}{основные функции ИИС, наиболее фундаментальные выделены}{fig:iis-functions}
    \begin{tikzpicture}[scale=0.9, transform shape]
      \tikzstyle{arrow}  = [->, thick]
      \tikzstyle{block} = [rectangle, rounded corners, draw=blue, fill=cyan!10, minimum height=2em,
                           text width=3cm, text centered, font=\small]
      \tikzstyle{main}  = [fill=cyan!20, font=\small\bfseries]
      \node[block,main] (rcv)  {Получение};
      \node[block,main] (proc) [right=1cm of rcv]  {Обработка};
      \node[block,main] (save) [below=5mm of proc] {Сохранение};
      \node[block]      (tran) [right=1cm of proc] {Передача};
      \node[block]      (disp) [above=5mm of tran] {Отображение};
      \node[block]      (ctrl) [above=5mm of rcv]  {Управление};

      \draw[arrow] (rcv) -- (proc);
      \foreach \to in {save, tran}
        \draw[arrow] (proc) -- (\to);
      \foreach \from/\to in {proc.140/ctrl, proc.40/disp}
        \draw[arrow] (\from) |- (\to);
      \draw[arrow, <-] (rcv.west)  -- ++(-5mm, 0);
      \draw[arrow]     (ctrl.west) -- ++(-5mm, 0);
      \draw[arrow]     (tran.east) -- ++(5mm, 0);
    \end{tikzpicture}
  \end{myfigure}

  В зависимости от требований конкретной задачи, стоящей перед ИИС, этот краткий список функций
  может изменяться и пополняться. При этом первые три являются наиболее фундаментальными и
  присутствуют практически в любой развитой измерительной информационной системе. % TODO источник?

  \subsection{Требования, предъявляемые к ИИС}\label{ssec:iis-requirements}

  Поскольку одной из главных целей применения ИИС, как было сказано выше, является автоматизация процесса
  измерения, рассмотрим в первую очередь требования к самому процессу автоматизации в общем случае.

  Общие принципы и требования, предъявляемые к системам автоматизации эксперимента \cite{vinogradov-discrete, kurochkin-kamak}:
  \begin{itemize}
    \item высокое быстродействие, а именно, достаточное для получения и анализа данных и оперативного принятия решений;
    \item надёжность, возможность длительной безотказной работы;
    \item простота эксплуатации и использование унифицированных блоков;
    \item гибкость, допускающая изменение состава и структуры системы в~процессе работы;
    \item возможность коллективного обслуживания различных установок;
    \item наличие диалогового режим работы, когда осуществляется непосредственная связь человека с системой;
    \item простая и быстрая система контроля.
  \end{itemize}

  К этим общим требованиям могут добавляться требования, определяемые конкретной задачей, например,
  использование определённого протокола передачи данных. Кроме того, сами общие требования, как
  правило, конкретизируются. Так, требования быстродействия формулируются в виде конкретных цифр:
  максимальное время отклика, предельный срок завершения, разброс значений времени отклика.

  Всё это напрямую относится и к измерительным информационным системам.  Состав и структура
  конкретной ИИС определяются перечисленными выше техническими требованиями, установленными
  государственным стандартом, и частными требованиями, содержащимися в техническом задании на её
  создание.

  Измерительная информационная система должна \cite[с.~28]{rannev-iis}:
  \begin{itemize}
    \item выполнять свои функции в соответствии с назначением и целью;
    \item управлять измерительным экспериментом согласно принятому алгоритму функционирования;
    \item обладать требуемыми показателями и характеристиками точности, надёжности и быстродействия;
    \item отвечать экономическим требованиям, предъявляемым к способам и форме представления
      информации, размещению технических средств; % TODO что это значит ???
    \item быть приспособленной к взаимодействию с другими ИИС, то есть обладать свойством программной, технической, информационной и метрологической
      совместимости;
    \item допускать возможность дальнейшей модернизации и развития.
  \end{itemize}

  В следующем подразделе вводится понятие измерительного канала, приведено сравнение одноканальных
  и многоканальных измерительных информационных систем и показано, как требования, перечисленные
  выше, влияют на выбор между ними.

  \subsection{Одноканальные и многоканальные ИИС}\label{ssec:multichannel}

  \term{Измерительный канал} измерительной системы~--- это конструктивно или функционально
  выделяемая часть ИИС, выполняющая законченную функцию от восприятия измеряемой величины до
  получения результата её измерений, выражаемого числом или соответствующим ему кодом
  \cite[с.~9]{volkov-iis}. Иначе говоря, под измерительным каналом понимается совокупность
  технических средств и линий дистанционной передачи между первичным преобразователем (датчиком), измерительным
  устройством и устройством отображения информации \cite[с.~420]{rannev-meas-tech}. Техническое
  устройство измерительного канала подробнее рассмотрено далее, в разделе~\ref{sec:hardware}.

  Различают простые измерительные каналы, реализующие прямые измерения какой-либо величины, и
  сложные измерительные каналы, содержащие несколько простых измерительных каналов для реализации
  косвенных, совокупных или совместных измерений. Например, при измерениях мощности в электрических
  сетях начальная часть сложного измерительного канала состоит из простых каналов измерения
  напряжения и тока.

  По количеству каналов ИИС можно разделить на \term{одноканальные} и \term{многоканальные}. Многоканальные ИИС
  параллельного действия являются более распространёнными, так как имеют ряд преимуществ перед
  одноканальными: обладают наиболее высокой надёжностью, высоким быстродействием, дают возможность
  подбирать средства измерений к измеряемым величинам
  \cite[с.~171]{rannev-iis}.

  Основные достоинства многоканальных измерительных систем связаны с возможностью измерения
  разнородных физических величин, достижения
  максимального быстродействия и высокой схемной надёжности. При этом надёжность многоканальных ИИС
  оценивается по-разному в зависимости от предъявляемых к ним требований. Если считать, что система
  работоспособна только при исправности всех входящих в нее элементов, то тогда (при одинаковых
  измерительных каналах) вероятность безотказной работы такой структуры может быть относительно
  низкой. Однако если важна работоспособность хотя бы одного канала, то в этом случае надёжность
  будет выше по сравнению с одноканальными системами, так как каналы дублируют друг друга.

  Недостатком многоканальных измерительных систем является большее (по сравнению с
  другими типами ИИС) число элементов, что может быть причиной более высокой стоимости. Впрочем, в
  последнее время в связи с развитием и удешевлением вычислительной техники этот недостаток
  перестаёт быть существенным. % TODO источник?

  % TODO рассказать про мультиплицированные ИИС? (они, по-видимому, не цифровые => не сильно интересно)

  % ------ end section ------------

  \paragraph{Выводы.} % FIXME нужно ли слово Выводы? Посмотреть в диссертации Богатова!
  Таким образом, в данном разделе было введено понятие измерительных информационных
  систем и связанные с ним определения, описана предметная область ИИС. Рассмотрены
  основные требования, предъявляемые к таким системам и показано, почему для их удовлетворения более
  предпочтительными являются многоканальные ИИС.

  В следующем разделе рассмотрены технические особенности построения измерительных систем,
  использование микроконтроллеров в них, виды цифровой обработки сигналов, а также способы
  синхронизации.

  \section{Аппаратные компоненты ИИС}\label{sec:hardware}

  Надёжная и эффективная работа ИИС в первую очередь определяется достоверностью информации,
  получаемой об исследуемом объекте. Выше были рассмотрены общие принципы автоматизации и
  требования, которые исходя из этого предъявляются к измерительным информационным системам.
  В данном разделе показано, как эти требования определяют техническое обеспечение измерительных систем: описаны входящие в их
  состав аппаратные компоненты, приведена структура измерительных каналов ИИС, а~также всей системы
  в целом. Наиболее важные компоненты рассмотрены отдельно.

  % ------ begin section ------------

  В состав измерительной информационной системы могут входит компоненты следующих типов
  \cite[с.~15]{volkov-iis}.
  % TODO форматирование: красиво выделять начало пункта жирным?
  \begin{enumerate}
    \item Первичные измерительные преобразователи (датчики).
    \item Измерительные преобразователи, масштабные преобразователи.
    \item Аналого-цифровые преобразователи.
    \item Цифровые устройства:
      \begin{enumerate}
        \item формирователи импульсов;
        \item преобразователи кодов;
        \item коммутаторы;
        \item устройства памяти;
        \item устройства сравнения кодов;
        \item универсальные программируемые вычислительные устройства~--- микропроцессоры, микро-ЭВМ;
        \item специализированные цифровые вычислительные устройства.
      \end{enumerate}
    \item Устройства вывода, отображения и регистрации.
    \item Интерфейсные устройства, служащие для приёма командных сигналов и передачи информации о
      состоянии блоков;
    \item Устройства управления, формирующие командную информацию, принимающее информацию от
      функциональных блоков и подающее команды на исполнительные устройства для формирования
      воздействия на объект исследования.
    \item Связи между вышеперечисленными устройствами.
  \end{enumerate}

  \subsection{Структура измерительной системы}\label{ssec:iis-structure}

  Перечисленные в подразделе~\ref{ssec:iis-requirements} принципы позволяют сформировать наиболее
  общую структуру автоматизированной системы управления экспериментом (рис.~\ref{fig:system-structure}).

  \begin{myfigure}{структурная схема автоматизированной системы измерений}{fig:system-structure}
    \begin{tikzpicture}[scale=0.9, transform shape]
      \tikzstyle{arrow}  = [->, thick]
      % item - общий стиль-предок для block, comp, control и user
      \tikzstyle{item}   = [rectangle, rounded corners, text centered, font=\footnotesize]
      \tikzstyle{block}  = [item, draw=blue, fill=cyan!10, text width=2.5cm, minimum height=4em]
      \tikzstyle{comp}   = [item, draw=orange, fill=orange!20!yellow!20,
                            text width=2cm, font=\small, minimum height=8em]
      \tikzstyle{object} = [circle, draw=OliveGreen, fill=green!10,
                            text centered, text width=2.2cm, font=\footnotesize]
                            % minimum height должна совпадать с той, что у block
      \tikzstyle{control}= [item, draw=teal, fill=teal!10,text width=4cm]
      \tikzstyle{user}   = [item, draw=violet, fill=violet!10, inner sep=5mm]
      % Блоки верхнего ряда (b = block)
      \node[object] (b0) {Исследуемый\\объект};
      \node[block]  (b1) [right=0.75cm of b0] {Датчики\\физических\\величин};
      \node[block]  (b2) [right=0.75cm of b1] {Каналы\\измерений};
      \node[block]  (b3) [right=0.75cm of b2] {Канал связи};
      % Большой блок "ЭВМ" (comp = computer)
      \node[comp] (Comp) [right=0.75cm of b3, shift={(0,-1)}] {ЭВМ};
      % Узлы для стрелок под блоками
      \foreach \x in {1,...,3} {
        \node (u\x)[below=of b\x] {};
      }
      % Узел под b0 располагаем с осторожностью: b0 имеет другую высоту
      \node (u0) at (u1-|b0) {};  % ( A -| B ) - точка с y-координатой от A и x-координатой от B
      % Стрелки под блоками
      \foreach \x in {0,...,3} {
        \draw [arrow] (u\x.north) -- (b\x);
      }
      % Нижняя объемлющая часть стрелки
      \draw [-, thick] (b0) -- (u0.north) -- (u0.north-|Comp.west) % ( A -| B ) - точка с y-координатой от A и x-координатой от B
            node[midway, below, font=\footnotesize] (Label) {Канал обратной связи};
      % Стрелки между блоками
      \foreach \from/\to in {b0/b1, b1/b2, b2/b3}
        \draw [arrow] (\from) -- (\to);
      % Горизонтальная стрелка между последним блоком и ЭВМ
      \draw [arrow] (b3) -- (b3-|Comp.west);

      \node[control] (Control) [below=0.5cm of  Label ] {Пульт контроля\\и управления};
      \node[user]    (User)    [below=0.75cm of Control] {Исследователь};

      \draw [<->, very thick, blue!50!black] (Comp) |- (Control);
      \draw [<->, ultra thick, brown!75!violet] (User) -- (Control);

      \draw [<-, very thick, red] (b0.west) -- ++(-0.5cm, 0cm) |- (Control);

    \end{tikzpicture}
  \end{myfigure}

  Данные об исследуемом объекте от специализированных датчиков физических величин
  поступают на вход каналов измерения, которые выполняют функции фильтрации, масштабирования,
  аналого-цифрового преобразования, коррекции данных. Затем данные по каналам связи поступают в
  ЭВМ, где происходит их основная обработка в соответствии с заданными математическими алгоритмами.
  При этом исследователь может следить за процессом обработки с помощью пульта контроля и управления, что
  позволяет в реальном масштабе времени вносить необходимые коррективы как в алгоритмы обработки,
  так и в процесс управления всей системой. Вся измерительная система охвачена каналом
  обратной связи, что позволяет напрямую управлять каждым из компонентов системы от ЭВМ
  \cite{kuzmichev-automation}.

  При практической реализации ИИС канал измерения представляет собой
  наиболее сложный узел, так как он определяет метрологические характеристики всей системы.
  Функции измерительного канала были описаны выше, в подразделе~\ref{ssec:multichannel},
  там же были показана важность многоканальных измерительных систем.
  Типичная схема реализации измерительного канала приведена на рис.~\ref{fig:channel-scheme}.

  \begin{myfigure}{функциональная схема канала измерения}{fig:channel-scheme}
    \begin{tikzpicture}[scale=0.9, transform shape]
      \tikzstyle{block} = [rectangle, draw=blue, rectangle, rounded corners, fill=cyan!10,
                           text centered, text width=3cm, font=\footnotesize, minimum height=4em]
      \tikzstyle{around} = [rectangle, draw=darkgray, loosely dashed, rectangle, rounded corners]
      % Блоки (c = channel)
      \node        (c0) {};
      \node[block] (c1) [right=0.5cm of c0] {Масштабный преобразователь};
      \node[block] (c2) [right=0.7cm of c1] {Устройство фильтрации};
      \node[block] (c3) [right=0.7cm of c2] {Аналогово-цифровой \mbox{преобразователь}}; % mbox чтобы избежать переноса
      \node[block] (c4) [right=0.7cm of c3] {Устройство управления};
      \node        (c5) [right=0.5cm of c4] {};

      \node[above=of current bounding box.center] (title) {Измерительный канал};

      % Стрелки под блоками
      \foreach \x in {1,...,3} {
        \node (u\x)[below=of c\x] {};
        \draw [->, thick] (c4) |- (u\x.north) -- (c\x);
      }

      \foreach \from/\to in {c0/c1, c1/c2, c2/c3, c3/c4, c4/c5}
        \draw [->, thick] (\from) -- (\to);

      \node[fit=(c0)(c3)(c5)(u1)(title),around]{\hspace*{\fill}~}; % hspace - хак, чтобы подавить underfull hbox
    \end{tikzpicture}
  \end{myfigure}

  При такой схеме данные с датчика физических величин поступают на масштабный преобразователь (например, усилитель),
  назначение которого связанно с преобразованием уровня аналогового сигнала до приемлемого значения.
  Далее аналоговый сигнал поступает на устройство фильтрации, которое в общем случае может состоять
  из разных по назначению фильтров, построенных как по аналоговой схеме, так и по цифровой. После
  фильтрации сигнал поступает на аналого-цифровой преобразователь, выполняющий
  функцию дискретизации аналогового сигнала. Устройство управления канала измерения
  выполняет функцию контроля и управления входящими в канал устройствами.

  Такое построение позволяет
  достаточно просто реализовать канал измерения, однако не обеспечивает решения всего спектра
  возможных измерительных задач. Действительно, использование раздельного управления в каждом канале
  измерения, с одной стороны, требует усложнения общего управления всеми каналами измерения (требует
  настройки каждого канала измерения по отдельности), с другой стороны, не позволяет точно
  синхронизировать измерения по каналам, и в третьих, в силу отсутствия промежуточных вычислительных
  процессоров, не позволяет всей автоматизированной системе в реальном времени реагировать на
  изменение входной информации \cite{stupin-methods}.

  Одним из решений указанных проблем является применение оптимальных программно-аппаратных
  алгоритмов обработки информации с точной синхронизацией по времени  обработки сигналов,
  что становится возможным благодаря использованию вычислительных процессоров и специализированных инструментальных средств.

  \subsection{Применение вычислительных процессоров}

  Далее рассмотрены общие принципы применения микропроцессоров в измерительных системах, после чего
  с их учётом предложена альтернативная схема канала измерения, не имеющая вышеперечисленных недостатков.

  Уменьшение размеров микропроцессоров и снижение их стоимости в последние десятилетия обеспечили
  возможность широкого использования их в разнообразных приборах и устройствах. Это касается и
  измерительной техники: как показано ниже, использование в них микропроцессоров может
  способствовать повышению производительности, надёжности и функциональности. При этом, безусловно,
  их наличие не является обязательным: в простых случаях измерительный прибор может быть успешно реализован
  и без использования микропроцессорных технологий, то есть построен на обычных, не программируемых
  интегральных схемах. Применение микропроцессоров оправдано в следующих случаях~\cite[с.~241]{rannev-meas-tech}.
  \begin{enumerate}
    \item Если для решения задачи без использования микропроцессоров требуется большое число интегральных
      схем (больше, чем 30--50).
    \item Если измерительный прибор является многофункциональным.
    \item Если предвидится дальнейшее расширение системы, добавление новых функций.
    \item Если измерительная система взаимодействует с большим числом входных и выходных устройств.
    \item Если в процессе работы необходимо сохранение в памяти больших объёмов данных.
    \item Если требуется статистическая обработка результатов измерения (или другие математические расчёты).
    \item Если есть необходимость в функциях самокалибровки и самодиагностики.
  \end{enumerate}
  Эти и другие частные случаям можно обобщить: применение микропроцессоров оправдано, если требуемые
  характеристики (точность, быстродействие, метрологические характеристики) средствами обычных
  интегральных схем достичь невозможно (либо это связано с существенными затруднениями).

  \subsubsection{Функции микропроцессоров}\label{sssec:mcu-functions}

  Микропроцессоры и микроЭВМ в ИИС используются для объединения приборов в единый комплекс и выполнения
  \term{контроллерных}, \term{вычислительных}, \term{тестовых}, \term{сервисных} функций, а также
  функций \term{распределённой обработки данных}~\cite[с.~421]{rannev-meas-tech}.
  Далее подробно рассмотрен каждый из этих классов функций, и для каждого из них показано, какие
  преимущества предоставляет их наличие (по сравнению с ИИС без использования микропроцессоров).

  \paragraph{Контроллерные функции} связаны с формированием управляющих воздействий для устройств,
  входящих в канал измерения, а также для других компонентов ИИС. Контроллерные функции можно
  подразделить на следующий ряд подфункций.
  \begin{enumerate}
    \item Управление измерительной цепью, например, переключение каналов и диапазонов, изменение
      параметров фильтров, управление масштабными преобразователями, и~т.~п.
    \item Управление аналого-цифровым преобразованием.
    \item Управление средствами представления информации оператору (клавиатурой, индикаторами,
      звуковой сигнализацией и дисплеем).
    \item Управление регистраторами (принтерами, самописцами, графопостроителями,
      накопителями на магнитных носителях).
    \item Управление внешней памятью.
  \end{enumerate}

  Благодаря выполнению этих функций применение микропроцессоров способствует увеличению
  функциональности измерительной системы, расширяет спектр совместимых с ней устройств.

  \paragraph{Вычислительные функции} обеспечивают обработку данных: первичную, вторичную и
  окончательную. К таким функциям относятся калибровка, нормализация, масштабирование, фильтрация,
  сжатие данных, распознавание образов, устранение ошибок и подавление помех, спектральный,
  корреляционный и статистический анализ и многие другие. Подробнее цифровая обработка сигналов
  рассмотрена далее, в подразделе~\ref{ssec:signal-processing}. Впрочем, многие из этих функций
  необязательно должны выполняться микропроцессором (то есть программно), они могут быть реализованы
  и аппаратно, устройствами, входящими в канал измерения (фильтрация~--- аналоговыми фильтрами,
  масштабирование~--- масштабными преобразователями, и~т.~д.), которые были рассмотрены выше, в
  подразделе~\ref{ssec:iis-structure}.

  Эти функции, как и контроллерные, способствуют расширению функциональности ИИС, а также повышению
  точности и надёжности. Например, точность может быть увеличена благодаря цифровым методам
  коррекции систематических и случайных погрешностей, а надёжность~--- с помощью переноса части
  функций (например, фильтрации) с ненадёжных аналоговых элементов на высоконадёжные цифровые.

  \paragraph{Тестовые функции} включают обнаружение и локализацию неисправностей в системе.
  Тестирование может либо выполняться с применением внешних микропроцессорных средств, либо быть
  полностью автономным, либо представлять собой комбинацию этих двух способов. В первом случае
  применяются специализированные \term{тестеры} с микроЭВМ, в которых и реализована программа
  тестирования. Во втором случае функции тестирования обычно выполняет либо основной процессор
  измерительной системы (наиболее очевидное решение), либо специально выделенный для этого
  микропроцессор в составе ИИС.

  Наличие в системе этих функций, реализация которых без микропроцессора затруднительна,
  повышает надёжность системы.

  \paragraph{Сервисные функции} расширяют основную функциональность измерительной системы
  дополнительными возможностями. Сюда относятся вторичная обработка и интерпретация результатов,
  генерация отчётов для интерпретации, документации и архивации.

  Наличие этих функций не является обязательным для измерительной системы, но в случае сложных
  систем они значительно облегчают взаимодействие пользователя с системой.

  \paragraph{Распределённая обработка данных} подразумевает распределение вычислительных задач между
  узлами системы. Под распределённой обработкой может подразумеваться как разделение разных задач
  между разными устройствами для независимого выполнения, так и параллельное выполнение одной задачи
  на нескольких процессорах для повышения производительности.

  Параллельное выполнение обработки данных несколькими программируемыми
  контроллерами повышает надёжность и быстродействие системы.

  \paragraph{Преимущества применения микропроцессоров.}
  Для каждого из класса функций выше были перечислены преимущества, которые они привносят в ИИС.
  Подводя итог, следует отметить, что использование микропроцессоров в измерительных информационных системах способствует
  повышению точности, помехоустойчивости, быстродействия, надёжности, а также расширяет набор
  функциональных возможностей ИИС, в том числе связанных с представлением информации пользователю
  и передачей информации по каналам связи \cite{klaassen-methods}.

  \subsubsection{Канал измерения с применением микроконтроллера}

  Перейдём теперь от общих принципов к их применению для построения измерительного канала.

  Перспективным решением является схема построения каналов измерения, в которой
  используется промежуточная микроЭВМ, в качестве которой могут быть применены как
  специализированные цифровые устройства, так и микроконтроллеры или цифровые сигнальные процессоры.
  Кроме перечисленных выше общих преимуществ применения микропроцессоров, в данном случае это также
  позволяет синхронизировать отдельные процессы обработки информации по времени. Задача синхронной обработки информации
  является важной ещё и потому, что применение цифровых фильтров при обработке измерительной
  информации в общем случае может приводить к рассинхронизации измерительной информации по отдельным
  измерительным каналам, связанной с различной задержкой во времени прохождения сигналов по
  измерительному тракту.

  Функциональная схема каналов измерения с применением микроконтроллера  представлена на
  рис.~\ref{fig:channel-with-microcontroller}.

  \begin{myfigure}{схема каналов измерения с применением микроконтроллера}{fig:channel-with-microcontroller}
    \begin{tikzpicture}[scale=0.85, transform shape]
      \tikzstyle{arrow}  = [->, thick]
      \tikzstyle{cline}  = [thick, Blue] % линия управления: толстый синий
      \tikzstyle{sline}  = [thick, Red] % линия синхронизации толстый синий
      \tikzstyle{item}   = [rectangle, rounded corners, text centered, font=\footnotesize]
      \tikzstyle{block}  = [item, draw=blue, fill=cyan!10, text width=3cm, minimum height=4em]
      \tikzstyle{around} = [item, draw=darkgray, loosely dashed]
      \tikzstyle{title}  = [above, font=\small]
      \tikzstyle{controller} = [item, draw=Blue, thick, fill=blue!10, text width=3cm, minimum height=2.5cm]
      \tikzstyle{syncdev}= [item, draw=OliveGreen, fill=green!10, text width=2.5cm]
      \tikzstyle{ram}    = [cylinder, aspect=0.25, inner sep=3mm, shape border rotate=90, draw=Emerald, fill=Emerald!10, text centered, font=\footnotesize]
      \tikzstyle{empty}  = [fill=none, draw=none, inner sep=0mm]

      % Блоки (c = channel, cIJ - канал номер I, блок номер J)
      % Задаём вручную начальные позиции каналов
      \node[empty] (c10) {};
      \node[empty] (c20) [below=3.5cm of c10] {};
      \node[empty] (cN0) [below=3.5cm of c20] {};
      % Всё остальное рисуем в цикле:
      \foreach \x in {1, 2, N} {
        \node[block] (c\x1) [right=0.5cm of c\x0] {Масштабный преобразователь};
        \node[block] (c\x2) [right=0.7cm of c\x1] {Устройство фильтрации};
        \node[block] (c\x3) [right=0.7cm of c\x2] {Аналогово-цифровой \mbox{преобразователь}}; % mbox чтобы избежать переноса
        \node[title] (title\x) at (c\x2.north) {Измерительный канал №$\x$};
        \foreach \from/\to in {c\x0/c\x1, c\x1/c\x2, c\x2/c\x3}
          \draw [arrow] (\from) -- (\to);
        % Узлы под боками (u = under, uIJ)
        \foreach \y in {1,2} {
          \node[empty] (u\x\y)[below=3mm of c\x\y] {};
        }
        % u3 отдельно: он ниже
        \node[empty] (u\x3)[below=6mm of c\x3] {};
        \node[fit=(c\x1)(c\x3)(u\x1)(title\x),around]{\hspace*{\fill}~}; % hspace - хак, чтобы подавить underfull hbox
      }
      \node[controller] (MCU) [right=2.5cm of c23] {Микроконтроллер};
      % Входы в контроллер: mc1, mc2, mcN
      \foreach \x/\angle in {1/160, 2/180, N/200} {
        \node (mc\x) [left=1cm of MCU.\angle] {};
        \draw [arrow] (c\x3) -| (mc\x.center) -- (mc\x.center -| MCU.west);
      }
      % Линия управления
      \node[circle,fill=Blue,inner sep=1mm] (Control) [right=4mm of u11-|mc1] {};
      \node[above right, Blue, font=\footnotesize] at (Control) {Линия управления};
      \draw [-, cline] (MCU) |- (Control);
      % Линия синхронизации
      \node[circle,fill=Red,inner sep=1mm] (Sync) [left=4mm of u23-|mc2] {};
      \node[below right, Red, font=\footnotesize] at (Sync-|Control) {Линия синхронизации};
      \draw [-, sline] (MCU) |- (Sync);
      % Соединяем линии синхронизации и управления с блоками
      \foreach \x in {1,2,N} {
        % Стрелки линии управления
        \foreach \y in {1,2} {
          \draw [->, cline] (Control) |- (u\x\y.center) -- (c\x\y);
        }
        % Стрелки линии синхронизации
        \draw [->, sline] (Sync) |- (u\x3.center) -- (c\x3);
      }
      % Устройство синхронизации
      \node[syncdev] (SyncDev) [below=2cm of MCU] {Устройство синхронизации};
      \draw[<-, thick, OliveGreen] (MCU.340) -- ++(4mm,0mm) |- (SyncDev);
      % ОЗУ
      \node[ram] (RAM) [above=2.2cm of MCU] {ОЗУ};
      \draw[<->, thick, Emerald] (MCU.20) -- ++(4mm, 0mm) |- (RAM);
      % Выход
      \draw[arrow] (MCU.east) -- ++(1, 0);

    \end{tikzpicture}
  \end{myfigure}

  Данные от датчиков физических величин поступают на масштабные преобразователи измерительных
  каналов. Использование при этом микроконтроллера с обратной связью позволяет повысить точность
  измерения входных величин за счёт разделения информации по каналам
  измерения с разным коэффициентом усиления и её сложением в микроконтроллере. В этом случае часть
  измерительных каналов работает с б\'{о}льшим сигналом, а часть настроена на малый сигнал, что
  позволяет измерять аналоговые сигналы в большом диапазоне значений, при этом на выходе
  микроконтроллера получается непрерывный сигнал во всем диапазоне значений физических датчиков.
  Устройства фильтрации также управляются от микроконтроллера, что позволяет не только выполнять
  стандартные операции фильтрации сигнала, но и оперативно реагировать на изменяющиеся помехи и адаптировать параметры
  фильтрации, что существенно увеличивает общую помехоустойчивость процесса измерения сигналов.

  Отфильтрованные данные поступают на аналого-цифровые преобразователи, которые, в свою очередь,
  управляются по линии синхронизации. Это позволяет решить задачу синхронной дискретизации сигналов
  по времени, при этом точность синхронизации будет определяться, в первую очередь, точностью
  устройства синхронизации, в качестве которого могут использоваться как классические источники
  высокоточных синхроимпульсов, так и генераторы синхроимпульсов, построенные с использованием
  глобальной системы позиционирования (GPS).

  Информация, поступающая на входы микроконтроллера в цифровом виде от аналого-цифровых
  преобразователей может как передаваться далее по линиями связи в основную ЭВМ, так и
  накапливаться во временном оперативном запоминающем устройстве. Это позволяет, с одной стороны,
  применять специализированные алгоритмы обработки информации с целью оперативного управления
  масштабными преобразователями и устройствами фильтрации, а с другой~--- за счёт применения
  высокоскоростных параллельных ОЗУ накапливать данные со скоростью, превосходящей возможности
  каналов связи. Такое применение гарантирует, что в заданный промежуток времени весь поток
  поступающей информации будет обработан и в дальнейшем передан в ЭВМ для анализа и хранения.

  Применение микроконтроллеров в подготовке информации для передачи по каналам связи позволяет
  более полно использовать каждый физический канал связи, что в общем случае позволяет как добиться
  большей скорости передачи информации, так и существенно расширить спектр применяемых видов каналов
  связи: от радиоканала до специализированной вычислительной сети. Применение специализированных
  алгоритмов в подготовке данных позволяет добиться гарантированного прохождения информации по
  каналам связи без потерь, а применение алгоритмов шифрования и распределения доступа позволяет
  большему количеству исследователей одновременно участвовать в физических экспериментах, при этом
  гарантируется надёжность управления всей системой.

  Таким образом, применение микроконтроллеров в качестве управляющего устройства сразу в нескольких
  каналах измерения автоматизированных систем позволяет существенно расширить возможности самой
  системы, кардинально повысить помехоустойчивость системы, решить вопрос синхронизации поступающих
  данных и, как результат, добиться повышения эффективности и достоверности процессов обработки
  измерительных сигналов в измерительной системе.

  % TODO в следующий раздел? (тогда подправить выводы в конце раздела)
  \subsection{Цифровая обработка сигналов}\label{ssec:signal-processing}

  % TODO картинки в этот раздел?

  Выше, в п.~\ref{sssec:mcu-functions} было показано, что выполнение микропроцессором, входящим
  в~состав ИИС, определённых вычислительных функций способствуют повышению точности, надёжности и
  расширению функциональности измерительных систем. Для выполнения этих функций требуется реализация
  алгоритмов цифровой обработке сигналов, краткий обзор которых приводится далее.

  Одной из самых распространённых операций обработки сигналов является фильтрация. Цель
  фильтрации состоит в подавлении помех, содержащихся в сигнале, или в выделении отдельных
  составляющих сигнала, соответствующих тем или иным свойствам исследуемого процесса. Фильтрация
  сигнала заключается в целенаправленном изменении соотношения между различными компонентами спектра
  сигнала.

  Хотя фильтрация может производиться аналоговыми устройствами, реализация цифровой фильтрации имеет
  ряд преимуществ. Цифровые фильтры обладают высокой точностью, гибкостью настройки, их легко
  изменять в соответствии с требованиями задачи. В отличие от аналоговых
  фильтров передаточная функция не зависит от дрейфа характеристик элементов. Но, несмотря на
  вышеперечисленные плюсы, цифровая фильтрация имеет и недостатки. Это, во-первых, трудность работы с
  высокочастотными сигналами: полоса частот ограничена частотой Найквиста, равной половине частоты
  дискретизации сигнала. Во-вторых, трудность работы в реальном времени~--- вычисления должны быть завершены в
  течение периода дискретизации. Для большей точности и высокой скорости обработки сигналов
  требуется не только мощный процессор, но и дополнительное, дорогостоящее, аппаратное обеспечение в
  виде высокоскоростных ЦАП и АЦП \cite{glinchenko-digital}.

  Для фильтрации и других видов анализа сигнала широко используется представление сигнала в
  частотной области, то есть анализ его спектра. \term{Дискретное преобразование Фурье} (ДПФ) может быть использовано для вычисления
  гармонических составляющих спектра по заданным дискретным отчётам аналогового сигнала, которые
  затем используются для осуществления фильтрации или выявления особенностей сигнала. Этот
  алгоритм имеет довольно большую вычислительную сложность: для определения одного коэффициента ДПФ
  сигнальной последовательности из $N$ отчётов необходимо выполнить около $N$ операций умножения на
  комплексное число и столько же сложений, а для нахождения всех коэффициентов объем вычислений
  составит $N^2$ \cite{solonina-algorithms}.

  Этого недостатка не имеет \term{быстрое преобразование Фурье} (БПФ, англ. \eng{Fast Fourier transform, FFT}), обеспечивающее
  вычисление коэффициентов спектра за меньшее число операций. В основу БПФ положен принцип разбиения
  заданной последовательности отчётов дискретного сигнала на несколько промежуточных
  последовательностей. Для этого число отчётов $N$ разделяется на множители. Затем, определяются
  спектры этих промежуточных последовательностей, и через них находится спектр всего сигнала.
  За счёт этого удаётся избежать большого числа повторяющихся при вычислении ДПФ операций.
  Особенно эффективно это позволяет обрабатывать сигнальные последовательности со значениями
  $N$, являющимися степенью числа $2$ за счёт возможности многократно делить входную
  последовательность отчётов на подпоследовательности.

  Впрочем, частотный анализ, эффективную реализацию которого представляет собой БПФ, является не
  единственным возможным способом анализа сигналов. Недостатками БПФ является отсутствие в
  получаемом спектре информации о том, как частоты изменяются со временем (как следствие,
  принципиально разные сигналы могут иметь одинаковый спектр), а также трудность детектирования
  импульсных помех (в спектре они оказываются растянуты по широкой частотной области и имеют низкую
  амплитуду). Для преодоления этих недостатков могут применяться различные методы: оконное
  преобразование Фурье, вейвлет-преобразование и авторегрессионные модели, обзор которых приводится
  в работе~\cite{veggeberg-signal-processing}.

  \term{Оконное преобразование Фурье} является модификацией классического преобразования Фурье, при
  котором временной интервал ограничивается за счёт умножения исследуемого сигнала на оконную
  функцию, отличную от нуля на ограниченном интервале. Результатом его применения является двумерная
  спектрограмма~--- интенсивность зависит от двух независимыми переменных: частоты и времени.
  В~отличие от классического Фурье-спектра, такая спектрограмма содержит больше информации о
  сигнале, так как отражает не только частотные, но и временн\'{ы}е зависимости.

  Другой широко используемый метод~--- \term{вейвлет-анализ}~--- также имеет много общего с
  Фурье-анализом. Отличием является то, что в качестве базисных функций используются не синусы и
  косинусы, а специальные функции, ограниченные как во временной, так и в частотной области~---
  \term{вейвлеты}. Множество базисных функций при этом получается из исходной функции (порождающего
  вейвлета) за счёт операций сдвига и масштабирования. Такие функции лучше подходят для представления
  реальных сигналов которые, в отличие от тригонометрических функций, ограничены во времени и могут иметь
  резкие перепады. Как и в случае оконного преобразования Фурье, результатом вейвлет-преобразования является
  двумерная спектрограмма, только в этом случае независимыми параметрами являются величины сдвига и
  масштабирования. На практике это позволяет эффективно обнаруживать импульсные помехи, которые
  будут приводить к увеличению определённых вейвлет-коэффициентов по сравнению с сигналом без помех.

  Принципиально другой подход связан с использованием \term{авторегрессионных моделей} (англ.
  \eng{AR-model}). В таких моделях дискретный сигнал представляется в виде суммы детерминированной и
  стохастической части: линейной комбинации предшествующих отсчётов и случайной ошибки.
  Коэффициенты линейной комбинации при этом представляют оценку спектра сигнала, а резкие увеличения
  коэффициента случайной ошибки свидетельствуют о наличии импульсных помех в исходном сигнале.

  Выше были перечислены популярные методы цифровой обработки сигналов. Выбор конкретного алгоритма
  анализа определяется особенностями решаемой задачи и является ключевым моментом, определяющим
  достижение поставленной цели \cite{zubarev-realtime}.

  \subsection{Устройство синхронизации процесса измерения}\label{ssec:sync}

  Точная синхронизация процедур обработки
  сигналов возможна за счёт применения вычислительных процессоров и специализированных
  инструментальных средств. Решение этой задачи позволяет синхронизировать отдельные процессы
  обработки информации по времени, что является существенным фактором возможности применения
  цифровой обработки сигналов в специализированных областях радиофизики и геофизики \cite{rathore-digital}.
  % FIXME подробнее: что даёт синхронизация

  Синхронизация может производиться двумя основными способами: с помощью сигналов синхронизации,
  передаваемых от устройства синхронизации, либо с использованием общего источника точного времени,
  в~качестве которого могут выступать протоколы точного времени (NTP или PTP) или глобальная система
  позиционирования (GPS).

  Традиционный подход к синхронизации заключается в проведении линий синхронизации от генератора
  синхроимпульсов ко всем синхронизируемым устройствам. Синхронизация на основе таких сигналов
  синхронизации является довольно гибкой и обеспечивает высокую точность, но имеет существенное
  ограничение по длине линий синхронизации. Слишком большая длина линий приводит к разности времени
  хода сигналов синхронизации и потере точности, и в этом случае более предпочтительным является
  использование источников точного времени, в частности, GPS.

  Использование системы GPS
  позволяет добиться точности межканальной синхронизации не менее 100 нс \cite{lombardi-gps}, причём в случае
  распределённого в пространстве объекта измерения нет необходимости направлять синхроимпульсы из
  единого устройства синхронизации, а можно использовать с каждым территориальным измерительным
  каналом свой GPS-приёмник, причём точность синхронизации при этом не изменяется,
  одновременно отсутствует погрешность обусловленная прохождением синхроимпульсов по длинным
  распределённым линиям. Дополнительным преимуществом является то, что при такой синхронизации
  данные привязаны к глобальному стандартному времени, что позволяет ассоциировать данные измерений
  из экспериментов, проведённых различными исследователями \cite{veggeberg-sync}.

  \paragraph{Выводы.}
  Таким образом, в данном разделе были рассмотрены аппаратные компоненты и структура измерительных
  информационных систем, приведён оптимальный способ построения канала измерения. Отдельно
  рассмотрены особенности применения микропроцессоров и устройств синхронизации в ИИС, сделан
  краткий обзор алгоритмов цифровой обработки сигналов.

  В следующем разделе рассмотрены программные компоненты, задачи стоящие перед ними и существующие
  программные решения для этих задач.

  \section{Программные компоненты ИИС}

  \todo{написать раздел.}

  % Про какие компоненты можно рассказать?
  % - коммуникации
  % - обработка
  % - принятие решений
  % - сохранение
  % - GUI

  \subsection{Методы и задачи программных компонентов ИИС}

  \todo{написать раздел.}

  \subsection{Существующие программные решения}\label{ssec:existing}
  % FIXME в этом подразделе указать, что переход на своё лучше по таким и таким причинам

  При решении задачи цифровой обработки сигналов программная часть может реализоваться отдельно под
  каждую конкретную задачу, как, например, в работе \cite{bak-autometry}.
  Тем не менее, существуют различные универсальные программные решения, которые можно разбить на две
  основных группы:
  \begin{enumerate}
    \item SCADA-системы (англ. Supervisory Control And Data Acquisition — диспетчерское управление и
      сбор данных), программные пакеты, предназначенные для разработки или обеспечения работы в
      реальном времени систем сбора, обработки, отображения и архивирования информации об объекте
      мониторинга или управления. \cite{boyer-scada}
      Примеры таких систем: InTouch, TraceMode и др.
    \item Платформы графического программирования, такие как LabVIEW \cite{lavrov-labview}, MatLab/Simulink и др.
  \end{enumerate}

  Главными преимуществами SCADA-систем являются их высокая производительность и надёжность,
  определяющиеся областью применения этих систем для контроля за крупными промышленными объектами.
  Это обуславливает и их главные недостатки: высокую стоимость и громоздкость, а~также, в отдельных
  случаях, необходимость использования специального оборудования.

  Платформы второй группы лишены этого недостатка. Однако в отличие от SCADA-систем, они не
  представляют из себя готовые решения, будучи лишь мощными средами для разработки таковых.
  И хотя наличие специализированных инструментов и готовых блоков делает разработку существенно
  проще по сравнению с языками программирования общего назначения, такие системы лучше всего
  подходят для прототипирования и демонстрационных целей, так как имеют худшее быстродействие по
  сравнению с первой группой из-за использования интерпретаторов.

  \section{Универсальная информационная система обработки экспериментальных данных}

  \subsection{Постановка задачи}\label{ssec:task}

  Как уже было сказано выше в~разделе \nameref{sec:intro},
  целью работы является повышение эффективности и достоверности процессов автоматизированной
  обработки измерительных сигналов. С этой целью разрабатывается универсальная информационная
  система обработки экспериментальных данных,
  специальное программное обеспечение,
  являющееся компромиссом между двумя группами имеющихся решений, описанных выше в
  подразделе~\ref{ssec:existing}, то есть готовой к интеграции, гибкой системой, но не такой
  громоздкой и сложной, как SCADA-системы.
  % FIXME этот вывод должен быть обоснован в ssec:existing

  К системе предъявляются следующие требования.

  Система должна быть готовой к использованию программой, не требующей модификации программного кода
  для применения к реальной измерительной системе. В частности, система должна реализовывать
  получение данных по протоколу RS-232\cite{sweet-serial} от микроконтроллера, выполняющего оцифровку.

  Необходимо, чтобы быстродействие системы было достаточным для обработки поступающих цифровых
  сигналов в реальном времени. В частности, система должна обрабатывать в секунду не менее 1000 % TODO цифра посерьёзнее
  отсчётов, поступающих на вход.
  % FIXME разрядность данных - немаловажный параметр (???)

  Для обеспечения точности привязки по времени система должна осуществлять синхронизацию времени с
  использованием системы GPS, что было объяснено выше, в подразделе~\ref{ssec:sync}.

  Система должна иметь два режима работы: диалоговый, в~котором пользователь может управлять
  программой с помощью графического интерфейса и наблюдать изменения обрабатываемых данных,
  визуализируемых в реальном времени, и фоновый режим, в~котором графический интерфейс отключается
  для экономии ресурсов.
  % FIXME про аппаратный интерфейс: с помощью светодиодов и тумблеров

  Наконец, для эффективного использования вычислительной мощности многоядерных центральных
  процессоров, получающих в наши дни всё большее распространение~\cite{steam-hardware}, нужно, чтобы
  вычисления могли выполняться параллельно.

  Для достижения цели ставятся следующие задачи:
  \begin{enumerate}
    \item Реализация процесса получения данных.
    \item Разработка высокопроизводительного модуля обработки цифровых данных.
    \item Реализация процесса синхронизации.
    \item Разработка подсистемы визуализации.
    \item Разработка модуля, позволяющего визуализировать ранее накопленные данные.
  \end{enumerate}

  В следующем разделе описан способ выполнения этих задач.

  \subsection{Реализация системы обработки сигналов}\label{ssec:impl}

  % TODO move upward?
  Система реализуется в~виде набора программ, написанных на языке C++. Выбор языка обоснован
  компромиссом между быстродействием и удобством разработки и интеграции, которые обеспечивает
  использование объектно-ориентированной парадигмы. Система состоит из следующих программ.

  \begin{enumerate}
    \item Основная программа, реализующая получение, обработку, сохранение и визуализацию данных
      (далее~--- основная программа).
    \item Программа статистической обработки накопленных данных, используемая для визуализации
      файлов, сохранённых основной программой (далее~--- программа обработки накопленных данных).
    \item Вспомогательная программа для генерации тестовых данных, описанная в подразделе~\ref{ssec:testing}
      (далее~--- генератор данных).
  \end{enumerate}

  В последующих подразделах описана архитектура этих программ и технологии, используемые при их
  разработке. В соответствии с выбором объектно-ориентированного языка программирования, архитектура описана в
  терминах объектно-ориентированного проектирования (англ. \eng{Object-Oriented Analysis and Design,
  OOAD}) \cite{booch-ooad}.
  % FIXME можно рисунок среды (???)

  \subsection{Архитектура системы}

  Основная программа и программа обработки накопленных данных являются независимыми исполняемыми
  модулями. Взаимодействие между программами происходит через поддержку общего формата файлов, в
  качестве которого используется \eng{Comma Separated Values} (CSV, RFC-4180 \cite{rfc4180}).
  Основная программа в ходе работы записывает файлы в~этом формате, которые затем могут быть прочитаны
  программой обработки накопленных данных. В остальном программы независимы и могут использоваться
  отдельно друг от друга.

  Далее рассмотрена архитектура каждой из этих программ.

  \subsubsection{Архитектура основной программы}\label{sssec:main-arch}

  Функциональность основной программы чётко разделяется на три части: получение данных, их
  преобразование и визуализация. Поэтому наиболее подходящей архитектурой становится
  <<Модель~--- Представление~--- Контроллер>> (англ. \eng{MVC: Model~--- View~--- Controller})
  \cite{gamma-patterns}, при этом получение данных соответствует уровню <<Модель>>, операции с
  данными~--- уровню <<Контроллер>> и, соответственно, визуализация~--- уровню <<Представление>>.

  Различают две модификации этой архитектуры, отличающиеся ролью уровня <<Модель>>: так называемые
  <<Пассивная модель>> и <<Активная модель>>. В~первом случае модель представляет собой лишь
  источник данных и никак не может воздействовать на представления и контроллер, вместо этого
  контроллер отслеживает её изменения и он же отвечает за обновление представления по необходимости.
  В~другом случае модель сама оповещает представления о том, что в ней произошли изменения, а
  заинтересованные представления подписываются на эти сообщения. Поскольку в~данной программе для
  достижения реального времени требуется как можно более быстрая реакция на поступающие данные, то
  при реализации этой программы используется вариант архитектуры MVC с активной моделью.

  Отделение модели и представления от логики приложения (контроллера) позволяет иметь различные
  взаимозаменяемые реализации как модели, так и представления: в~случае модели это разные протоколы
  обмена данными, в~случае представления~--- различные виды интерфейса: графический, текстовый, и~т.\,д.
  Кроме того, упрощается реализация параллельных вычислений: каждый из трёх уровней может работать
  в~отдельном потоке исполнения.

  \begin{myfigure}{архитектура основной программы}{fig:main-arch}
    \begin{tikzpicture}[scale=1.0, transform shape]
      \tikzstyle{arrow}  = [->, thick]
      \tikzstyle{impl}   = [-, thick, dashed]
      \tikzstyle{label}  = [draw=none, fill=none, font=\footnotesize\em]
      % item - общий стиль-предок для разных видов блоков
      \tikzstyle{item}   = [rectangle, text centered, font=\footnotesize, minimum height=2.5em]
      % block - общий стиль-предок для округлых блоков
      \tikzstyle{block}  = [item, rounded corners, thick, text width=3cm]
      % box - общий стиль-предок для прямоугольных блоков
      \tikzstyle{box}    = [item, text width=1cm]
      % model, view, ctrl - три уровня MVC
      \tikzstyle{model}  = [draw=Violet, fill=Violet!10]
        \tikzstyle{mblk} = [model, block]
        \tikzstyle{mbox} = [model, box]
      \tikzstyle{view}   = [block, draw=Emerald, fill=Emerald!10]
      \tikzstyle{ctrl}   = [block, draw=cyan, fill=cyan!10]
      % блоки
      \node[mblk] (Proto) {Абстрактный\\протокол};
      \node[mbox] (COM)   [below=of Proto.south west, anchor=west] {COM\\порт};
      \node[mbox] (Eth)   [below=of Proto.south east, anchor=east] {Ethe\-rnet};
      \node[ctrl] (Core)  [right=of Proto] {Ядро};
      \node[view] (GUI)   [right=of Core ] {Графический\\интерфейс};
      \node[view] (CLI)   [below=3mm of GUI  ] {Текстовый\\интерфейс};
      % стрелки
      \draw[arrow] (Proto) -- (Core);
      \draw[arrow] (Core.east) -- (GUI.west);
      \draw[arrow] (Core.east) -- (CLI.north west);
      \draw[impl]  (COM) -- (Proto.south-|COM);
      \draw[impl]  (Eth) -- (Proto.south-|Eth);
      % подписи
      \node[label] [above=3mm of Proto] {Модель};
      \node[label] [above=3mm of Core ] {Контроллер};
      \node[label] [above=3mm of GUI  ] {Представление};
    \end{tikzpicture}
  \end{myfigure}

  Таким образом, архитектура основной программы приобретает вид, показанный на рис.~\ref{fig:main-arch}.
  Стрелками показано направление движения данных, пунктиром~--- реализация абстрактного класса.

  С точки зрения объектно-ориентированного проектирования, каждый из блоков на рис.~\ref{fig:main-arch}
  реализуется в~виде класса, причём классы, реализующие различные протоколы (например, RS-232,
  Ethernet, виртуальный тестовый протокол для проверки и~т.\,п.), наследуются от общего абстрактного
  класса-родителя. Тем самым исключается зависимость ядра от конкретной реализации протокола, что
  позволяет сделать его универсальным.

  \subsubsection{Архитектура программы обработки накопленных данных}

  В~программе обработки накопленных данных, как и в основной программе, описанной выше в
  п.~\ref{sssec:main-arch}, независимость визуализации от обработки данных также делает уместным
  применение архитектуры MVC. Но в~отличие от основной программы, здесь данные не приходят извне, а
  считываются из файла и в~дальнейшем при необходимости редактируются пользователем, то~есть и их
  изменение изнутри, а не извне программы. Всё это приводит к тому, что здесь можно использовать
  более простой вариант архитектуры MVC с <<пассивной>> моделью. Недостатком этого варианта является
  то, что при этом значительная часть программного кода сосредоточена в контроллере, а модель и
  представление тривиальны. Впрочем, для данной программы этот недостаток не является критическим,
  так как её функциональность не настолько велика, чтобы класс-контроллер оказался перегружен.

  \begin{myfigure}{архитектура программы обработки накопленных данных}{fig:stat-arch}
    \begin{tikzpicture}[scale=1.0, transform shape]
      \tikzstyle{arrow}  = [->, thick]
      \tikzstyle{label}  = [draw=none, fill=none, font=\footnotesize\em]
      % item - общий стиль-предок для разных видов блоков
      \tikzstyle{item}   = [rectangle, text centered, font=\footnotesize, minimum height=2.5em]
      % block - общий стиль-предок для округлых блоков
      \tikzstyle{block}  = [item, rounded corners, thick, text width=3cm]
      % model, view, ctrl - три уровня MVC
      \tikzstyle{modl}  = [block, draw=Violet, fill=Violet!10]
      \tikzstyle{view}   = [block, draw=Emerald, fill=Emerald!10]
      \tikzstyle{ctrl}   = [block, draw=cyan, fill=cyan!10]
      % блоки
      \node[modl] (Stat)  {Статистика};
      \node[modl] (Readr) [below=0.75cm of Stat] {Чтение\\файла};
      \node[modl] (Writr) [below=0.3cm of Readr] {Запись\\файла};
      \node[ctrl] (Core)  [right=of Stat] {Ядро};
      \node[view] (GUI)   [right=of Core ] {Графический\\интерфейс};
      \node[view] (Print) [below=0.75cm of GUI ] {Печать\\отчёта};
      % стрелки
      \draw[arrow]    (Readr) -| (Core.220);
      \draw[arrow] (Core.320) |- (Writr);
      \draw[arrow]     (Core) -- (Stat);
      \draw[arrow,<->] (Core) -- (GUI);
      \draw[arrow]     (Core.east) -- (Print.north west);
      % подписи
      \node[label] [above=3mm of Stat] {Модель};
      \node[label] [above=3mm of Core] {Контроллер};
      \node[label] [above=3mm of GUI ] {Представление};
    \end{tikzpicture}
  \end{myfigure}

  На рис.~\ref{fig:stat-arch} представлена архитектура программы обработки накопленных данных. Стрелками
  показано направление движения данных. Видно, что всеми потоками данных управляет контроллер, что и
  является особенностью варианта MVC с пассивной моделью.

  \subsection{ПО ИС обработки экспериментальных данных}

  \todo{написать раздел.}

  \subsubsection{Используемые технологии}\label{ssec:techno}

  После того, как сделан выбор языка программирования для реализации системы (в данном случае это
  C++, как было указано в разделе \ref{ssec:impl}), необходимо определиться с набором используемых
  программных библиотек. В~случае, если подходящие библиотеки для данного языка имеются, и являются тщательно
  протестированными, то их использование более предпочтительно, чем самостоятельная разработка той
  же функциональности. Если некий набор библиотек реализует комплексный подход к~решению
  определённого круга задач, то такие библиотеки могут объединяться в общую систему, существенно
  определяющую структуру использующего их приложения. В~этом случае говорят уже не об отдельных
  библиотеках, а о~так называемом программном каркасе, или фреймфорке (англ. \eng{framework}).

  Далее описан выбор базового MVC-фреймворка, а так же библиотек для реализации
  конкретных особенностей уровней модели и представления.

  \paragraph{Базовый MVC-фреймворк.}
  Поскольку MVC выбрана в~качестве основной архитектуры для обеих программ, то особенно важным
  становится выбор библиотеки или фреймворка, отвечающих за реализацию этой модели в программном
  коде. Как было сказано выше, выбранный фреймворк будет влиять и накладывать свои ограничения и на
  структуру разрабатываемой программы. Именно поэтому особого внимания заслуживают свободные и
  кроссплатформенные библиотеки и фреймворки: их использование не требует дополнительных затрат на
  лицензию, открытый свободный код даёт больший контроль над возможностями библиотеки \cite{open-source},
  а кроссплатформенность исключает проблемы, которые могут впоследствии возникнуть при необходимости
  переноса программы на другую платформу.

  Среди имеющегося в~наши дни свободного кросплатформенных программного обеспечения для разработки
  графического интерфейса на языке C++ наиболее распространены библиотека GTK+ (сокращение от англ.
  \eng{GIMP ToolKit}) \cite{gtk} и фреймворк Qt (произносится <<кьют>>) \cite{qt}. В данной работе
  выбор сделан в~пользу Qt, поскольку этот фреймворк обладает следующими преимуществами.
  \begin{enumerate}
    \item Расширение языка C++, реализуемое с помощью \eng{Meta Object Compiler (MOC)}, который
      транслирует расширенный диалект C++ в стандартный C++.
    \item Мощная модель так называемых <<сигналов>> и <<слотов>>, позволяющая использовать
      событийно-ориентированное программирование, причём MOC обеспечивает лаконичный синтаксис их определения.
    \item Широкие возможности графического интерфейса с возможностью расширения стандартного набора
      элементов пользовательскими либо элементами из сторонних библиотек (рис.~\ref{fig:qt-creator}).
    \item Простота локализации приложения на новый язык благодаря инструменту \eng{Linguist},
      входящему в состав Qt.
  \end{enumerate}

  \includefigure[width=0.7\linewidth]{среда разработки Qt Creator в режиме визуального редактора.
    Видно большое разнообразие графических элементов, представление логической иерархии в виде
    дерева, а также редактор меню и сигналов-слотов.}{qt-creator}

  В данной работе используется версия фрейворка Qt 5.2.

  С учётом выбора Qt в качестве базового фреймворка, необходимо выбрать совместимые с ним библиотеки
  для важных функций основной программы: получения данных по протоколу RS-232 через последовательный
  порт и визуализации полученных данных в виде графиков. Выбор этих библиотек описан далее.

  \paragraph{Библиотека для работы с последовательным портом.}
  На момент написания работы в широком доступе имелись две сторонних библиотеки для работы с
  последовательным портом средствами Qt: QtSerialPort \cite{qtserialport} и QextSerialPort \cite{qextserialport}.
  Первая, QtSerialPort, будучи изначально сторонней библиотекой, была принята разработчиками Qt и
  войдёт в его состав, что свидетельствует о качестве этой библиотеки. Однако вторая
  библиотека, QextSerialPort, имеет некоторые серьёзные преимущества перед ней: это давно и активно
  развивающийся проект, то есть он более надёжен; поддерживает широкий набор версий Qt от Qt2 до Qt5
  что исключает проблемы обратной совместимости; наконец, не имеет внешних зависимостей (в то время
  как для работы QtSerialPort необходим Perl). Всё это определяет выбор в~пользу QextSerialPort.
  В данной работе используется последняя стабильная версия на момент написания~--- QextSerialPort 1.2.

  \paragraph{Библиотека для построения графиков.}
  Для построения графиков в~графическом интерфейсе Qt имеются две основных альтернативы: QWT (англ.
  \eng{Qt Widgets for Technical Applications}) \cite{qwt} и QCustomPlot \cite{qcustomplot}.  Обе эти
  библиотеки беспрепятственно интегрируются с Qt-приложением и позволяют строить графики разных
  типов. При этом однозначными преимуществами QWT являются более широкий набор функций и
  возможностей конфигурации, подробная документация и более активная разработка и исправление
  ошибок: последняя версия на момент написания работы, 6.1.0~--- от 30 мая 2013 (против 9 июня 2012 в
  случае QCustomPlot). Поэтому в~данной работе используется QWT, а~именно, версия 6.1.0.

  \subsubsection{Инструментальная среда и разработка программного кода системы}

  \todo{написать раздел.}

  \subsubsection{Программа обработки накопленных данных}
  
  \todo{написать раздел.}

  \subsection{Тестирование и испытание системы}\label{ssec:testing}

  Для тестирования системы была разработана вспомогательная тестовая программа~--- генератор данных,
  во время тестирования заменяющий собой реальный измерительный прибор: в него загружаются данные из
  файла, а он передаёт их по последовательному порту, преобразуя к~тому виду, который они имели бы,
  если бы приходили с~реального прибора после оцифровки микроконтроллером.

  Генератор данных разрабатывался с~использованием тех же средств, что и основная программа:
  фреймворка Qt и библиотеки QextSerialPort, которые были описаны в подразделе~\ref{ssec:techno}.
  Внешний вид этой программы показан на рис.~\ref{fig:conserial}.

  \includefigure[width=0.4\textwidth]{Тестовая программа~--- генератор данных}{conserial}

  Процесс отладки во время разработки происходит следующим образом. На персональный компьютер,
  используемом при разработке, устанавливается эмулятор COM-порта, создающий два виртуальных порта
  ведущих себя так, как если бы они были соединены друг с другом кабелем. При помощи генератора
  данных данные передаются основной программе через этот виртуальный порт. Тем самым проверяется
  корректность реализации взаимодействия с последовательным портом и логики приложения, хотя и
  генератор данных, и основная программа физически находятся на одном компьютере.

  Для окончательного тестирования применяется реальное соединение. Два персональных компьютера
  соединяются нуль-модемным кабелем \cite{null-modem}, на одном из них запускается основная
  программа, на другом~--- генератор данных. После установления соединения в~генератор данных
  загружаются данные из файла, и он отправляет их через это соединение на другой компьютер, где их
  получает и отображает основная программа. В качестве данных использовались реальные данные с
  сейсмических датчиков, записанные на испытательном стенде для сейсмографов. Проведённое
  тестирование подтвердило корректность работы основной программы.

  \subsection{Результаты}

  Основная программа разработана и протестирована на реальных сигналах. Внешний вид программы
  представлен на рис.~\ref{fig:main}.
  \includefigure[width=0.7\textwidth]{основная программа}{main}
  % FIXME свежий скриншот

  Принцип работы пользователя с данной программой следующий. Для её работы необходимо подключить
  микроконтроллер, выполняющий оцифровку данных, при помощи последовательного порта к персональному
  компьютеру, на котором запускается основная программа. После запуска программы указывается порт,
  по которому выполнено подключение, после чего нажатием кнопки <<Подключить>> инициализируется
  процесс соединения с микроконтроллером и обмена командами. При успешном его завершении программа
  переходит в режим готовности к приёму данных, и становится доступной кнопка <<Запуск>>. При её нажатии
  программа отправляет микроконтроллеру команду, разрешающую передачу данных и начинает
  регистрировать получаемые данные. Зарегистрированные данные отображаются в~табличном и
  в~графическом виде: в~виде графика зависимости уровня сигнала от времени. По мере работы также
  отображается время начала приёма, прошедшее время и количество полученных данных. Приём данных
  прекращается кнопкой <<Стоп>>, также имеется возможность закрыть соединение с микроконтроллером
  нажатием кнопки <<Отключить>>, после чего программа переходит в изначальное состояние и работу с
  ней можно начинать с начала.

  Программа обработки накопленных данных разработана, также протестирована на данных реального
  сигнала. Было выяснено, что программа может открывать файлы объёмом вплоть до \num{100000} записей
  и рассчитывать для них статистику без серьёзного замедления в работе. Внешний вид программы
  показан на рис.~\ref{fig:stat}.
  \includefigure[width=0.6\textwidth]{программа обработки накопленных данных}{stat}
  % FIXME можно более подробно

  Помимо использования вместе с основной программой, данная программа может найти применение при
  исследовании физических процессов, связанных с измерением физических параметров и эффективно
  проводить качественный и количественный анализ экспериментальных данных с оперативным изменением
  процесса измерения. В программе реализованы следующие функции: ввод экспериментальных данных с
  клавиатуры и из файла, редактирование введённых данных, расчёт среднего значения,
  среднеквадратичного отклонения, дисперсии и моментов, построение настраиваемой гистограммы и кривой
  данных, генерация отчёта с возможностью сохранения его в файл в формате HTML, а также сохранения
  графиков в виде изображения PNG. При открытии или создании нового файла программа рассчитывает все
  перечисленные величины, строит кривую данных и гистограмму. В дальнейшем, при каждом
  изменении данных пользователем эти величины пересчитываются, графики обновляются. Таким образом,
  имеется возможность вводить и обновлять данные об эксперименте и уже по мере ввода видеть
  изменение статистических значений, а по завершении ввода получить готовый ответ о среднем значении
  и его точности в виде $x \pm \Delta x$.

  Программа обработки накопленных данных была зарегистрирована в Реестре программ для ЭВМ в феврале 2013
  года. (Свидетельство о гос. регистрации программы №~2013612036, Программа ProcessData)
  %\section{Дальнейшая работа}

  \sectiontoc{Заключение}

  В данной работе ставилась цель разработать универсальную программную систему обработки экспериментальных данных,
  работающую в реальном времени и обеспечивающую помимо обработки точную синхронизацию по времени и
  визуализацию обрабатываемых данных. Эта цель была достигнута, и были удовлетворены поставленные в
  подразделе~\ref{ssec:task} требования, включая высокое быстродействие и гибкость, а~также применение
  параллельных вычислений.

  Проведено тестирование с использованием вместо реального измерительного прибора вспомогательной
  программы, передающей через последовательный порт тестовые данные. В качестве тестовых данных
  использовались реальные данные с сейсмических датчиков. Тестирование показало пригодность системы
  для реальных измерений.

  Была также разработана и зарегистрирована программа для статистической обработки накопленных
  данных, которая может быть использоваться и как часть системы, и отдельно от неё, например, при
  проведении лабораторных работ по физике.

  Также были исследованы возможности дальнейшего развития и улучшения системы. В частности,
  планируется расширение набора поддерживаемых протоколов для получения данных и добавление новых
  операций обработки данных, а также реализация синхронизации с~помощью GPS.

  Работа была представлена на заседании Студенческого научного общества физико-технического факультета
  КубГУ в апреле 2013 года и награждена дипломом третьей степени.

  \begin{flushleft}
    \bibliographystyle{../../biblio/ugost2003} % Или использовать ugost2008 для нового ГОСТа
    \bibliography{../../biblio/my}
  \end{flushleft}
\end{document}
